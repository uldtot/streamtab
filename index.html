<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="./css/bootstrap.min.css">

  <title>Streamtab</title>

  <style>
    html,
    #content {
      background: #141414;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      color: #fff !important;
    }

    img {
      max-width: 100%;
    }

    .listservicesrowitem {
      padding: 0px !important;
    }

    .listservicesrowitem .innerdiv {
      display: flex;
      background: #000 !important;
      width: 100%;
      height: 100%;
      padding: 5%;
    }

    .listservicesrowitem div img {
      filter: grayscale(100%);
    }

    .listservicesrowitem:hover div img {
      filter: grayscale(0%);
    }

    .listservicesrowitem:hover .innerdiv .editlink {
      display: block !important;
    }

    .listservicesrowitem:hover .innerdiv .removelink {
      display: block !important;
    }

    .editlink {
      position: absolute;
      top: 10%;
      left: 10%;
      z-index: 999;
      color: #424242;
    }

    .removelink {
      position: absolute;
      top: 10%;
      right: 10%;
      z-index: 999;
      color: #424242;
    }


    span.servicetitle {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0%;
      text-align: center;
      color: rgb(255 255 255 / 85%);
      background: #00000040;
      padding: 6px;
    }

    .listservicesrow {
      text-align: center;
    }

    .listservicesrowitem {
      text-align: center;
    }

    .navbar {
      background-color: #141414 !important;
    }

    .btn-primary {
      color: #fff;
      background-color: #141414 !important;
      border-color: #424242 !important;
    }

    .form-control {
      color: #fff;
      border-color: #424242 !important;
      border-radius: 0.25rem 0 0 0.25rem !important;
      border-right: 0px !important;
      background-color: #141414 !important;
    }

    .btnsearch {

      border-radius: 0 0.25rem 0.25rem 0 !important;
    }

    .listnotes li:hover .removenote {
      display: block !important;
    }

    #listnotes {
      list-style: none;
      margin-left: -30px;
    }

    #listnotes .row {
      color: #fff;
      position: relative;
      margin-bottom: 10px;
    }

    #listnotes .row:hover .removenote {
      display: block !important;
      position: absolute;
      top: 10%;
      right: 10%;
      z-index: 999;
      color: #424242;
    }
  </style>
</head>

<body>
  <main id="content">

    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <nav class="navbar navbar-expand-lg navbar-dark">

            <div class="col-md-2">
              <a class="navbar-brand" href="#">
                <svg width="100%" height="100%" viewBox="0 0 492 492" version="1.1" xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/"
                  style="    width: 32px;
                            height: 32px;fill:#fff;fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
                  <g transform="matrix(0.1,0,0,-0.1,-256.419,769.005)">
                    <path
                      d="M4275,7423C3969,7376 3703,7211 3514,6949C3395,6786 3340,6635 3300,6362C3293,6312 3280,6274 3258,6237C3196,6134 3110,6038 3020,5973C2962,5930 2775,5820 2761,5820C2757,5820 2731,5801 2705,5778C2617,5700 2597,5610 2651,5530C2693,5467 2734,5435 2804,5409C2917,5366 3124,5384 3405,5461C3466,5478 3525,5494 3538,5497C3555,5501 3574,5490 3619,5449C3735,5342 3796,5296 3868,5262C3936,5230 3941,5225 3935,5202C3932,5188 3918,5124 3905,5061C3892,4997 3872,4911 3860,4870C3848,4829 3830,4761 3819,4720C3800,4650 3771,4574 3699,4410C3587,4151 3592,3766 3712,3522C3792,3359 4008,3170 4185,3110C4224,3097 4260,3083 4265,3079C4271,3075 4327,3064 4390,3054C4495,3037 4584,3035 5435,3035C6430,3035 6427,3035 6605,3086C6799,3143 7016,3295 7132,3455C7260,3633 7331,3790 7385,4018C7399,4074 7413,4133 7416,4148C7428,4195 7431,4491 7422,4585C7404,4755 7339,4981 7284,5066C7240,5134 7216,5145 7120,5145C7044,5145 7028,5141 6973,5113C6938,5095 6893,5068 6873,5052C6723,4938 6581,4840 6565,4840C6561,4840 6545,4831 6530,4820C6492,4793 6391,4756 6288,4731C6220,4714 6169,4710 6024,4710C5801,4709 5715,4722 5566,4780C5492,4809 5372,4886 5325,4934C5257,5005 5140,5192 5140,5230C5140,5238 5131,5260 5119,5279C5100,5310 5100,5314 5114,5322C5123,5327 5157,5353 5189,5380C5403,5558 5571,5902 5587,6193C5592,6289 5583,6422 5566,6495C5553,6554 5528,6639 5510,6686C5488,6747 5411,6902 5400,6910C5396,6913 5382,6931 5369,6951C5269,7103 5125,7223 4929,7319C4760,7402 4677,7421 4475,7424C4382,7426 4292,7425 4275,7423ZM3897,6667C3987,6620 4025,6493 3974,6415C3951,6379 3908,6367 3830,6372C3680,6383 3616,6478 3676,6602C3713,6680 3815,6709 3897,6667Z"
                      style="fill-rule:nonzero;" />
                  </g>
                </svg><span style="vertical-align: middle;margin-left:10px;">Entertainment</span>

              </a>
            </div>
            <div class="col-md-8 form-inline justify-content-center">
              <form class="form-inline ml-auto mr-auto">
                <input class="form-control" type="text" id="searchinput" placeholder="Start your search..."
                  onkeyup="filterElements()" />
                <button class="btn btn-primary my-2 my-sm-0 btnsearch" type="submit"
                  onclick="filterElements()">Search</button>
                <a href="#" id="clearLink"
                  style="display: none;color:#424242 !important;margin-left: 10px;font-size: 12px !important;"
                  onclick="clearSearch()">Clear search</a>
              </form>
            </div>
            <div class="col-md-2 text-right">

              <!-- Button trigger modal -->
              <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Add
                new</button>

            </div>
          </nav>
        </div>
      </div>
      <!-- Streaming services -->
      <div class="row px-4 py-4">
        <div class="col-md-2">
          <div class="page-header py-4">
            <h1>
              Your streaming services<br><small>A list you have created for your entertainment</small>
            </h1>
          </div>
          <h3 class="py-4">Notes <a href="#" style="color:#424242" data-toggle="modal" data-target="#notesModal">+</a>
          </h3>
          <ul id="listnotes"></ul>
        </div>
        <div class="col-md-10" id="listservices">
          <div class="row d-flex align-items-stretch" id="listservicesrow"><!-- Row output here --></div>
        </div>
      </div>


      <div class="row">
        <div class="col-md-12 text-center footer">
          <p class=" my-4" style="color:#fff;">Entertainment at Your Fingertips â€¢ <a
              href="https://github.com/websitecareio/duckchannel" target="_blank"
              style="color:#fff;text-decoration: underline;">GitHub</a></span>
            <br>
            <a class="" href="#" id="exportStreamData" onclick="exportStreamData()" target="_blank"
              style="color:#424242;">Export stream
              data</a> | <a class="" href="#" id="exportNotesData" onclick="exportNotesData()" target="_blank"
              style="color:#424242;">Export notes
              data</a> | <a class="" href="#" id="importData" data-target="#importModal" data-toggle="modal"
              style="color:#424242;">Import data</a> | <a class="" href="#" id="importData" onclick="return clearData()"
              style="color:#424242;">Remove all data</a>

        </div>


      </div>

  </main>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="dataform">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="title">Title</label>
              <input type="text" class="form-control" id="title" name="title" required>
            </div>
            <div class="form-group">
              <label for="type">Type</label>
              <select class="form-control" id="type" name="type" required>
                <option>Movie</option>
                <option>Serie</option>
                <option>Service</option>
              </select>
            </div>
            <div class="form-group">
              <label for="description">Description</label>
              <textarea class="form-control" id="description" rows="3" name="description" required></textarea>
            </div>
            <div class="form-group">
              <label for="image">Image</label>
              <input type="text" class="form-control" id="image" name="image" required>
            </div>
            <div class="form-group">
              <label for="url">URL</label>
              <input type="text" class="form-control" id="url" name="url" required>
            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" onclick="addData()">Save changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Import Modal -->
  <div class="modal fade" id="importModal" tabindex="-1" role="dialog" aria-labelledby="importModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="importModalLabel">Import data</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="importType">Type of data</label>
            <select class="form-control" id="importType" name="importType" required>
              <option value="duckdata">Streaming data</option>
              <option value="ducknotes">Notes data</option>
            </select>
          </div>
          <form id="importForm">
            <div class="form-group">
              <label for="importField">Data</label>
              <textarea class="form-control" id="importField" rows="3"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onclick="importData()">Import</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Edit element</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <input type="hidden" class="form-control" id="idInput">
            <div class="form-group">
              <label for="titleInput">Title</label>
              <input type="text" class="form-control" id="titleInput">
            </div>
            <div class="form-group">
              <label for="typeInput">Type</label>
              <select class="form-control" id="typeInput" name="typeInput" required>
                <option>Movie</option>
                <option>Serie</option>
                <option>Service</option>
              </select>
            </div>
            <div class="form-group">
              <label for="descriptionInput">Description</label>
              <textarea class="form-control" id="descriptionInput"></textarea>
            </div>
            <div class="form-group">
              <label for="imageInput">Image</label>
              <input type="text" class="form-control" id="imageInput" name="imageInput" required>
            </div>
            <div class="form-group">
              <label for="urlInput">URL</label>
              <input type="text" class="form-control" id="urlInput" name="urlInput" required>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onclick="saveEdit()">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Notes Modal -->
  <div class="modal fade" id="notesModal" tabindex="-1" role="dialog" aria-labelledby="notesModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="notesModalLabel">Add note</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!-- Note input field -->
          <div class="form-group">
            <label for="noteInput">Note</label>
            <input type="text" class="form-control" id="noteInput" placeholder="Enter note">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" onclick="saveNote()">Save note</button>
        </div>
      </div>
    </div>
  </div>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

  <script>
    loadServices();
    loadNotes();


    // Load services data
    function loadServices() {
      // Check if the duckdata array exists in local storage
      if (localStorage.getItem("duckdata") !== null) {
        // If it does, get the array and loop through the items
        var duckdata = JSON.parse(localStorage.getItem("duckdata"));

        // o create an array of the IDs of each title, you can use the following code
        var ids = [];

        for (var i = 0; i < duckdata.length; i++) {
          ids.push({ title: duckdata[i].title, value: "" + i + "" });
        }

        console.log(ids); // Outputs [1, 2, 3]


        // Sort the data by ascending numerical value
        duckdata.sort(function (a, b) {
          return b.lastclicked - a.lastclicked;
        });

        for (var i = 0; i < duckdata.length; i++) {

          // Find the index of the item with the name "Bob"
          var index = ids.findIndex(function (item) {
            return item.title === duckdata[i].title;
          });

          // Get the title value of each item
          var title = duckdata[i].title;
          var type = duckdata[i].type;
          var description = duckdata[i].description;
          var image = duckdata[i].image;
          var url = duckdata[i].url;
          var lastclicked = duckdata[i].lastclicked;
          // Output the title value to the page
          document.getElementById("listservicesrow").innerHTML += "<div class=\"col-md-3 px-4 py-4  listservicesrowitem\"><div class=\"innerdiv\"><a class=\"editlink\" style=\"display:none;\" href=\"#\" data-toggle=\"modal\" data-target=\"#editModal\" onclick=\"loadEditForm(event," + index + ")\">Edit</a><a class=\"removelink\" style=\"display:none;\" href=\"#\" onclick=\"return removeElement(event," + index + ")\">Remove</a><a href=\"" + url + "\" target=\"_blank\" onclick=\"openUrl(" + index + ")\"><img src=\"" + image + "\"><span class=\"servicetitle  mx-4 my-4\">" + title + "</span></a></div></div>";
        }
      }
    }

    // Load services data
    function loadNotes() {
      // Check if the duckdata array exists in local storage
      if (localStorage.getItem("ducknotes") !== null) {
        // If it does, get the array and loop through the items
        var duckdata = JSON.parse(localStorage.getItem("ducknotes"));
        for (var i = 0; i < duckdata.length; i++) {
          // Get the title value of each item
          var note = duckdata[i];
          // Output the title value to the page
          document.getElementById("listnotes").innerHTML += "<div class=\"row\"><div class=\"col-md-9\">" + note + "</div><div class=\"col-md-3\"> <a href=\"#\" class=\"removenote\" style=\"display:none;\" onclick=\"return removeNote(" + i + ")\">Remove</a></div></div>";
        }
      }
    }

    // Save data
    function addData() {
      // Get the duckdata data from the form
      var title = document.getElementById("title").value;
      var type = document.getElementById("type").value;
      var description = document.getElementById("description").value;
      var image = document.getElementById("image").value;
      var url = document.getElementById("url").value;


      if (title === "" || type === "" || description === "" || image === "" || url === "") {
        // The title field is empty, so prevent the form from being submitted
        event.preventDefault();
        alert("All fields must be filled");
        return;
      }


      // Create a duckdata object
      var data = {
        title: title,
        type: type,
        description: description,
        image: image,
        url: url,
        lastclicked: 0
      };

      // Check if the movies array already exists in local storage
      if (localStorage.getItem("duckdata") === null) {
        // If it doesn't, create a new array and add the duckdata
        var duckdata = [];
        duckdata.push(data);
        localStorage.setItem("duckdata", JSON.stringify(duckdata));
      } else {
        // If it does, get the array and add the movie
        var duckdata = JSON.parse(localStorage.getItem("duckdata"));
        duckdata.push(data);
        localStorage.setItem("duckdata", JSON.stringify(duckdata));
      }

      // Clear the form
      document.getElementById("dataform").reset();

      // Close the modal
      $("#editModal").modal("hide");
    }

    // Export data
    function exportStreamData() {

      // Check if the data array exists in local storage
      if (localStorage.getItem("duckdata") !== null) {

        console.log("Exporting...");
        // If it does, get the array and convert it to a string
        var data = JSON.stringify(JSON.parse(localStorage.getItem("duckdata")));

        // Create a Blob object containing the data string
        var blob = new Blob([data], { type: "text/plain" });

        // Create a download link for the Blob object
        var download = document.getElementById("exportStreamData");
        download.href = URL.createObjectURL(blob);

      } else {
        console.log("No data found..");
      }

    }

    // Export notes data
    function exportNotesData() {

      // Check if the data array exists in local storage
      if (localStorage.getItem("ducknotes") !== null) {

        console.log("Exporting...");
        // If it does, get the array and convert it to a string
        var data = JSON.stringify(JSON.parse(localStorage.getItem("ducknotes")));

        // Create a Blob object containing the data string
        var blob = new Blob([data], { type: "text/plain" });

        // Create a download link for the Blob object
        var download = document.getElementById("exportNotesData");
        download.href = URL.createObjectURL(blob);

      } else {
        console.log("No data found..");
      }

    }

    // Clear data
    function clearData() {
      // Show a confirm dialog
      if (confirm("Are you sure you want to clear all data from local storage?")) {
        // Clear all data from local storage
        localStorage.clear();
        return true;
      } else {
        // Do not clear the data
        return false;
      }
    }

    // Import data

    function importData() {
      // Get the data from the textarea field
      var type = document.getElementById("importType").value;
      var data = document.getElementById("importField").value;

      // Parse the data into a JavaScript object
      var dataObject = JSON.parse(data);

      // Store the data object in local storage
      localStorage.setItem(type, JSON.stringify(dataObject));

      // Close the modal
      $("#importModal").modal("hide");
    }


    // Search function
    function filterElements() {

      // Get the value of the filter input
      var filterValue = document.getElementById("searchinput").value.toLowerCase();

      // If the search input is not empty, show the clear link; otherwise, hide it
      if (filterValue !== "") {
        document.getElementById("clearLink").style.display = "";
      } else {
        document.getElementById("clearLink").style.display = "none";
      }

      // Get all the element divs
      var elements = document.getElementById("listservicesrow").getElementsByClassName("listservicesrowitem");

      // Loop through the elements
      for (var i = 0; i < elements.length; i++) {
        // Get the text content of the element
        var elementText = elements[i].textContent.toLowerCase();

        // If the element text includes the filter value, show the element; otherwise, hide it
        if (elementText.includes(filterValue)) {
          elements[i].style.display = "";
        } else {
          elements[i].style.display = "none";
        }
      }
    }

    function clearSearch() {
      // Clear the value of the search input
      document.getElementById("searchinput").value = "";

      // Hide the clear link
      document.getElementById("clearLink").style.display = "none";

      filterElements();
    }


    function loadEditForm(element, id) {

      // Get the data for the element from local storage
      var elementData = JSON.parse(localStorage.getItem("duckdata"))[id];

      // Populate the form with the element data
      document.getElementById("idInput").value = id;
      document.getElementById("titleInput").value = elementData.title;
      document.getElementById("typeInput").value = elementData.type;
      document.getElementById("descriptionInput").value = elementData.description;
      document.getElementById("imageInput").value = elementData.image;
      document.getElementById("urlInput").value = elementData.url;
    }

    function saveEdit() {

      var id = document.getElementById("idInput").value;
      var duckdata = JSON.parse(localStorage.getItem("duckdata"));

      duckdata[id].title = document.getElementById("titleInput").value;
      duckdata[id].type = document.getElementById("typeInput").value;
      duckdata[id].description = document.getElementById("descriptionInput").value;
      duckdata[id].image = document.getElementById("imageInput").value;
      duckdata[id].url = document.getElementById("urlInput").value;
      duckdata[id].lastclicked = 0;

      // Update the element data in local storage
      localStorage.setItem("duckdata", JSON.stringify(duckdata));

      // Close the modal
      $("#editModal").modal("hide");

    }

    function removeElement(event, id) {

      if (confirm("Are you sure you want to remove this?")) {
        // Clear all data from local storage

        var duckdata = JSON.parse(localStorage.getItem("duckdata"));

        // Remove the item from the collection
        duckdata.splice(id, 1); // Start from, delete 1 item

        // Store the updated collection in local storage
        localStorage.setItem("duckdata", JSON.stringify(duckdata));


        return true;
      } else {
        // Do not clear the data
        return false;
      }


    }

    function saveNote() {
      // Get the note input field
      var input = document.getElementById("noteInput");

      // Get the current notes from local storage
      var notes = JSON.parse(localStorage.getItem("ducknotes")) || [];

      // Add the new note to the collection
      notes.push(input.value);

      // Store the updated notes in local storage
      localStorage.setItem("ducknotes", JSON.stringify(notes));

      // Clear the input field
      input.value = "";

      // Close the modal
      $("#notesModal").modal("hide");
    }


    function removeNote(id) {

      if (confirm("Are you sure you want to remove this?")) {
        // Clear all data from local storage

        var duckdata = JSON.parse(localStorage.getItem("ducknotes"));

        // Remove the item from the collection
        duckdata.splice(id, 1); // Start from, delete 1 item

        // Store the updated collection in local storage
        localStorage.setItem("ducknotes", JSON.stringify(duckdata));


        return true;
      } else {
        // Do not clear the data
        return false;
      }


    }

    function openUrl(id) {

      // Get the current timestamp
      var timestamp = new Date().getTime();

      var duckdata = JSON.parse(localStorage.getItem("duckdata"));

      duckdata[id].lastclicked = timestamp;

      // Update the element data in local storage
      localStorage.setItem("duckdata", JSON.stringify(duckdata));


    }

  </script>

</body>

</html>
